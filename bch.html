<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö</title>
<meta name="theme-color" content="#333333">

<style>
body {
    font-family: Arial, sans-serif;
    margin: 10px;
    font-size: 1.2rem;
    line-height: 1.6;
    padding-bottom: 110px;
}

h1, h2 {
    font-size: 1.5rem;
    text-align: center;
}

.input-group {
    display: flex;
    flex-direction: column;
    margin-bottom: 15px;
}

label {
    font-size: 1.2rem;
    margin-bottom: 5px;
}

input, select {
    font-size: 1.2rem;
    padding: 12px;
    margin-bottom: 5px;
    border: 1px solid #ccc;
    border-radius: 4px;
    width: 100%;
}

/* üîπ –°—ñ—Ä–∏–π —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏–π —Ç–µ–∫—Å—Ç */
input::placeholder {
    color: #9a9a9a;
}

#results {
    margin-top: 20px;
    padding: 10px;
    background-color: #f9f9f9;
    border: 1px solid #ccc;
    border-radius: 4px;
    white-space: pre-wrap;
    font-size: 1.4rem;
}

/* üîò –§—ñ–∫—Å–æ–≤–∞–Ω–∞ –ø–∞–Ω–µ–ª—å */
.bottom-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: #f0f0f0;
    border-top: 1px solid #999;
    display: flex;
    gap: 8px;
    padding: 10px;
    z-index: 10;
}

.bottom-bar button {
    flex: 1;
    font-size: 1.1rem;
    padding: 14px;
    background:#4CAF50;
    color:white;
    border:none;
}
</style>
</head>

<body>

<h1>–§–æ—Ä–º–∞ –≤–≤–µ–¥–µ–Ω–Ω—è —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –¥–∞–Ω–∏—Ö</h1>

<div class="input-group">
    <label>–ï–∫—ñ–ø–∞–∂:</label>
    <input type="text" id="crew-input" oninput="saveCrewText()">
    <label>
        <input type="checkbox" id="shift-complete">
        –ó–∞–≤–µ—Ä—à–∏–≤ —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è
    </label>
</div>

<div class="input-group">
    <label>–í–∏—ó–∑–¥ –Ω–∞ –ø–æ–∑–∏—Ü—ñ—é:</label>
    <select id="ovp-select" onchange="saveOvpSelection()">
        <option value=""></option>
        <option>–û–í–ü</option>
        <option>–ó–í–ü-1</option>
        <option>–ó–í–ü-2</option>
        <option>–ó–í–ü-3</option>
        <option>–ó–í–ü-4</option>
        <option>–ó–í–ü-5</option>
        <option>–ó–í–ü-6</option>
        <option>–°–æ—Å–Ω–æ–≤–∏–π –ë—ñ—Ä</option>
    </select>
</div>

<h2>–î–∞–Ω—ñ</h2>

<div class="input-group">
    <input id="text1-input"
           placeholder="–ü—Ä—ñ–∑–≤–∏—â–µ —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª–∏ —á–ª–µ–Ω–∞ –µ–∫—ñ–ø–∞–∂—É"
           oninput="saveTextFields()">
    <select class="selection" onchange="saveSelections()">
        <option>–ë–ß</option>
        <option>–ü–ü–î</option>
    </select>
</div>

<div class="input-group">
    <input id="text2-input"
           placeholder="–ü—Ä—ñ–∑–≤–∏—â–µ —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª–∏ —á–ª–µ–Ω–∞ –µ–∫—ñ–ø–∞–∂—É"
           oninput="saveTextFields()">
    <select class="selection" onchange="saveSelections()">
        <option>–ë–ß</option>
        <option>–ü–ü–î</option>
    </select>
</div>

<div class="input-group">
    <input id="text3-input"
           placeholder="–ü—Ä—ñ–∑–≤–∏—â–µ —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª–∏ —á–ª–µ–Ω–∞ –µ–∫—ñ–ø–∞–∂—É"
           oninput="saveTextFields()">
    <select class="selection" onchange="saveSelections()">
        <option>–ë–ß</option>
        <option>–ü–ü–î</option>
    </select>
</div>

<div class="input-group">
    <input id="text4-input"
           placeholder="–ü—Ä—ñ–∑–≤–∏—â–µ —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª–∏ —á–ª–µ–Ω–∞ –µ–∫—ñ–ø–∞–∂—É"
           oninput="saveTextFields()">
    <select class="selection" onchange="saveSelections()">
        <option>–ë–ß</option>
        <option>–ü–ü–î</option>
    </select>
</div>

<div id="results"></div>

<!-- üîò –ö–ù–û–ü–ö–ò -->
<div class="bottom-bar">
    <button onclick="processResults()">–û–±—Ä–æ–±–∏—Ç–∏</button>
    <button onclick="shareResults()">–ü–µ—Ä–µ–¥–∞—Ç–∏</button>
    <button onclick="goMenu()">–ú–µ–Ω—é</button>
</div>

<script>
function el(id){ return document.getElementById(id); }

window.onload = function(){
    // –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è crew-input —ñ ovp-select
    if(localStorage.crewText) el("crew-input").value = localStorage.crewText;
    if(localStorage.ovpSelection) el("ovp-select").value = localStorage.ovpSelection;

    // üîπ –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ text1‚Äìtext4
    if(localStorage.textFields){
        const texts = JSON.parse(localStorage.textFields);
        el("text1-input").value = texts[0] || "";
        el("text2-input").value = texts[1] || "";
        el("text3-input").value = texts[2] || "";
        el("text4-input").value = texts[3] || "";
    }

    // üîπ –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è select –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ text-–ø–æ–ª—è (–ë–ß / –ü–ü–î)
    if(localStorage.selections){
        const sels = JSON.parse(localStorage.selections);
        const selects = document.querySelectorAll(".selection");
        selects.forEach((s, i) => {
            s.value = sels[i] || "–ë–ß"; // –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ë–ß
        });
    }
};

function saveCrewText(){
    localStorage.crewText = el("crew-input").value;
}

function saveOvpSelection(){
    localStorage.ovpSelection = el("ovp-select").value;
}

function saveTextFields(){
    localStorage.textFields = JSON.stringify([
        el("text1-input").value,
        el("text2-input").value,
        el("text3-input").value,
        el("text4-input").value
    ]);
}

function saveSelections(){
    localStorage.selections = JSON.stringify(
        [...document.querySelectorAll(".selection")].map(s=>s.value)
    );
}

function processResults(){
    const crew = el("crew-input").value || "";
    const ovp  = el("ovp-select").value || "";
    const done = el("shift-complete").checked;

    const texts = [
        el("text1-input").value,
        el("text2-input").value,
        el("text3-input").value,
        el("text4-input").value
    ];
    const sels = [...document.querySelectorAll(".selection")].map(s=>s.value);

    let out="";

    if(done){
        out = `${crew} –∑–∞–≤–µ—Ä—à–∏–≤ —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è`;
    } else {
        let bc=[], ppd=[];
        texts.forEach((t,i)=>{
            if(!t.trim()) return;
            (sels[i]==="–ë–ß" ? bc : ppd).push(t.trim());
        });

        out = `${crew} (${ovp})\n`;
        if(bc.length) out += "–ù–∞ –ë–ß:\n" + bc.join("\n") + "\n";
        if(ppd.length) out += "–ù–∞ –ü–ü–î:\n" + ppd.join("\n") + "\n";
        out += "4.5.0";
    }

    el("results").innerHTML = `<pre>${out}</pre>`;
}

async function shareResults(){
    const text = el("results").innerText;
    if(!text) return alert("–ù–µ–º–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É");

    if(navigator.share){
        navigator.share({ text });
    } else {
        navigator.clipboard.writeText(text);
        alert("–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ");
    }
}

function goMenu(){
    window.location.href = "./index.html";
}
</script>

</body>
</html>
