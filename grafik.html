<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ì—Ä–∞—Ñ—ñ–∫ —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è</title>

<style>
body {
  font-family: Arial, sans-serif;
  padding: 10px;
  padding-bottom: 90px;
}

select, input, button {
  margin: 6px 0;
  width: 100%;
  padding: 8px;
  font-size: 16px;
}

h3 { margin-top: 0; }

.legend span {
  padding: 4px 8px;
  margin-right: 6px;
  border-radius: 4px;
  display:inline-block;
  font-size: 13px;
}

.on { background:#7ec8ff; }
.off { background:#7dff9a; }
.patrol { background:#ffb3b3; font-weight:bold; color:#900; }

.error {
  color:#b00020;
  font-weight:bold;
  margin:8px 0;
}

table {
  border-collapse: collapse;
  font-size: 14px;
  min-width: 100%;
}

th, td {
  border: 1px solid #999;
  padding: 8px;
  text-align: center;
}

th {
  background:#f0f0f0;
  position: sticky;
  top: 0;
  z-index: 4;
}

#tableContainer {
  max-height: 65vh;
  overflow: auto;
  border: 1px solid #999;
  margin-top: 10px;
}

body.mobile {
  font-size: 13px;
}

body.mobile h3 {
  font-size: 16px;
  text-align: center;
}

body.mobile table {
  font-size: 12px;
}

body.mobile th,
body.mobile td {
  padding: 4px;
  min-width: 90px;
}

body.mobile th:first-child,
body.mobile td:first-child {
  position: sticky;
  left: 0;
  background: #f8f8f8;
  z-index: 5;
  min-width: 120px;
}

body.tablet table {
  font-size: 13px;
}

.bottom-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: #f0f0f0;
  border-top: 1px solid #999;
  display: flex;
  gap: 6px;
  padding: 8px;
  z-index: 10;
}

.bottom-bar button {
  flex: 1;
  font-size: 15px;
  padding: 10px;
}

.schedule-type {
  background: #f8f8f8;
  padding: 10px;
  border-radius: 5px;
  margin-bottom: 10px;
  border: 1px solid #ddd;
}

.patrol-period-container {
  display: flex;
  align-items: center;
  margin: 6px 0;
}

.patrol-period-container label {
  flex: 1;
  margin-right: 10px;
}

.patrol-period-container input {
  flex: 1;
}

.info-text {
  font-size: 12px;
  color: #666;
  margin-top: -4px;
  margin-bottom: 10px;
}
</style>
</head>

<body>

<div class="schedule-type">
  <h3 id="scheduleTitle">–ì—Ä–∞—Ñ—ñ–∫ —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è –µ–∫—ñ–ø–∞–∂—É (48/24)</h3>
  <label>–¢–∏–ø –≥—Ä–∞—Ñ—ñ–∫–∞</label>
  <select id="scheduleType">
    <option value="48/24">48/24 (48 –≥–æ–¥–∏–Ω —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è, 24 –≤—ñ–¥–ø–æ—á–∏–Ω–æ–∫)</option>
    <option value="24/12">24/12 (24 –≥–æ–¥–∏–Ω–∏ —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è, 12 –≤—ñ–¥–ø–æ—á–∏–Ω–æ–∫)</option>
  </select>
</div>

<div class="legend">
  <span class="on">–ß–µ—Ä–≥—É–≤–∞–Ω–Ω—è</span>
  <span class="off">–í—ñ–¥–ø–æ—á–∏–Ω–æ–∫</span>
  <span class="patrol">–î–û–ó–û–†</span>
</div>

<div id="errorBox" class="error"></div>

<label>–ß–∞—Å –ø–æ—á–∞—Ç–∫—É —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è (–¥–ª—è –≤—Å—ñ—Ö)</label>
<select id="startTime">
  <option value="">‚Äî –æ–±–µ—Ä—ñ—Ç—å ‚Äî</option>
  <option value="6">06:00</option>
  <option value="18">18:00</option>
</select>

<label>–ú—ñ—Å—è—Ü—å —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É</label>
<select id="calcMonth"></select>

<label>–î–∞—Ç–∞ –ø–µ—Ä—à–æ–≥–æ –î–û–ó–û–†–£</label>
<input id="patrolDate" type="date">

<label>–ß–∞—Å –ø–æ—á–∞—Ç–∫—É –î–û–ó–û–†–£</label>
<select id="patrolTime">
  <option value="">‚Äî –æ–±–µ—Ä—ñ—Ç—å ‚Äî</option>
  <option value="6">06:00</option>
  <option value="18">18:00</option>
</select>

<div class="patrol-period-container">
  <label>–ü–µ—Ä—ñ–æ–¥–∏—á–Ω—ñ—Å—Ç—å –¥–æ–∑–æ—Ä—ñ–≤</label>
  <input id="patrolPeriod" type="text" placeholder="1/4 –∞–±–æ 3,6,11">
</div>
<div class="info-text">
  –§–æ—Ä–º–∞—Ç: "1/4" - –∫–æ–∂–Ω—ñ 4 –¥–Ω—ñ, –∞–±–æ "3,6,11" - —á–∏—Å–ª–∞ –º—ñ—Å—è—Ü—è —á–µ—Ä–µ–∑ –∫–æ–º—É
</div>
<div class="info-box">
  –î–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–ª–µ–Ω–∞ –µ–∫—ñ–ø–∞–∂—É –≤–≤–µ–¥—ñ—Ç—å –ü–Ü–ë —Ç–∞ –¥–∞—Ç—É –ø–æ—á–∞—Ç–∫—É –π–æ–≥–æ —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è. 
  –î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É –≤–∏–∑–Ω–∞—á–∞—î, –∫–æ–ª–∏ —Å–∞–º–µ –∫–æ–∂–µ–Ω —á–ª–µ–Ω –µ–∫—ñ–ø–∞–∂—É –ø–æ—á–∏–Ω–∞—î —Å–≤—ñ–π –ø–µ—Ä—à–∏–π —Ü–∏–∫–ª —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è.
</div>
  
<hr>

<label>–ß–ª–µ–Ω –µ–∫—ñ–ø–∞–∂—É 1</label>
<input id="n1"><input id="d1" type="date">

<label>–ß–ª–µ–Ω –µ–∫—ñ–ø–∞–∂—É 2</label>
<input id="n2"><input id="d2" type="date">

<label>–ß–ª–µ–Ω –µ–∫—ñ–ø–∞–∂—É 3</label>
<input id="n3"><input id="d3" type="date">

<div id="tableContainer"></div>

<div class="bottom-bar">
  <button onclick="build()">–ü–æ–±—É–¥—É–≤–∞—Ç–∏</button>
  <button onclick="shareTable()">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è</button>
  <button onclick="goMenu()">–ú–µ–Ω—é</button>
</div>

<script>
/* üì± –ê–≤—Ç–æ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∏—Å—Ç—Ä–æ—é */
(function(){
  const w = window.innerWidth;
  if (w <= 600) document.body.classList.add('mobile');
  else if (w <= 1024) document.body.classList.add('tablet');
})();

/* –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ä–µ–∂–∏–º—ñ–≤ */
const SCHEDULE_TYPES = {
  '48/24': {
    SHIFT_ON: 48,
    SHIFT_OFF: 24
  },
  '24/12': {
    SHIFT_ON: 24,
    SHIFT_OFF: 12
  }
};

const STEP = 12; // –∫—Ä–æ–∫ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è

/* –ú—ñ—Å—è—Ü—ñ */
(function(){
  const y = new Date().getFullYear();
  for(let i=0;i<12;i++){
    const o=document.createElement('option');
    o.value=`${i}-${y}`;
    o.text=String(i+1).padStart(2,'0')+'-'+y;
    document.getElementById('calcMonth').appendChild(o);
  }
})();

/* –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö */
const fields=['scheduleType','startTime','calcMonth','patrolDate','patrolTime','patrolPeriod','n1','d1','n2','d2','n3','d3'];
fields.forEach(id=>{
  const el=document.getElementById(id);
  if(localStorage[id]) el.value=localStorage[id];
  el.onchange=()=>{
    localStorage[id]=el.value;
    if(id === 'scheduleType') {
      updateScheduleTitle();
    }
  };
});

/* –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
function updateScheduleTitle() {
  const type = document.getElementById('scheduleType').value;
  document.getElementById('scheduleTitle').textContent = `–ì—Ä–∞—Ñ—ñ–∫ —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è –µ–∫—ñ–ø–∞–∂—É (${type})`;
}

/* –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
updateScheduleTitle();

function showError(m){ 
  document.getElementById('errorBox').textContent=m;
  console.error(m); // –î–æ–¥–∞—î–º–æ –≤–∏–≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ–±–∞–≥—É
}
function clearError(){ document.getElementById('errorBox').textContent='' }

function build(){
  console.log('–§—É–Ω–∫—Ü—ñ—è build –≤–∏–∫–ª–∏–∫–∞–Ω–∞'); // –î–ª—è –¥–µ–±–∞–≥—É
  
  clearError();
  
  // –û—Ç—Ä–∏–º—É—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤
  const startTime = document.getElementById('startTime').value;
  const calcMonth = document.getElementById('calcMonth').value;
  const patrolDate = document.getElementById('patrolDate').value;
  const patrolTime = document.getElementById('patrolTime').value;
  const patrolPeriod = document.getElementById('patrolPeriod').value;
  
  console.log('–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–ª—ñ–≤:', {startTime, calcMonth, patrolDate, patrolTime, patrolPeriod}); // –î–ª—è –¥–µ–±–∞–≥—É
  
  if(!startTime||!calcMonth||!patrolDate||!patrolTime||!patrolPeriod) {
    console.log('–ù–µ –≤—Å—ñ –ø–æ–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ'); // –î–ª—è –¥–µ–±–∞–≥—É
    return showError('‚ùó –ó–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –æ–±–æ–≤ º—è–∑–∫–æ–≤—ñ –ø–æ–ª—è');
  }

  const scheduleTypeValue = document.getElementById('scheduleType').value;
  const schedule = SCHEDULE_TYPES[scheduleTypeValue];
  const SHIFT_ON = schedule.SHIFT_ON;
  const SHIFT_OFF = schedule.SHIFT_OFF;
  
  const CYCLE_LENGTH = SHIFT_ON + SHIFT_OFF; // –∑–∞–≥–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞ —Ü–∏–∫–ª—É

  const [month,year]=calcMonth.split('-').map(Number);
  const crew=[
    {n:document.getElementById('n1').value, d:new Date(document.getElementById('d1').value), h:0},
    {n:document.getElementById('n2').value, d:new Date(document.getElementById('d2').value), h:0},
    {n:document.getElementById('n3').value, d:new Date(document.getElementById('d3').value), h:0}
  ];
  
  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–∞—Ç –µ–∫—ñ–ø–∞–∂—É
  if (!crew[0].d.getTime() || !crew[1].d.getTime() || !crew[2].d.getTime()) {
    return showError('‚ùó –í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –¥–∞—Ç–∏ –ø–æ—á–∞—Ç–∫—É —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –≤—Å—ñ—Ö —á–ª–µ–Ω—ñ–≤ –µ–∫—ñ–ø–∞–∂—É');
  }
  
  crew.forEach(c=>c.d.setHours(startTime,0,0,0));

  const mStart=new Date(year,month,1,startTime);
  const mEnd=new Date(year,month+1,1,startTime);

  let pStart=new Date(patrolDate);
  pStart.setHours(patrolTime,0,0,0);

  // –ü–∞—Ä—Å–∏–Ω–≥ –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ—Å—Ç—ñ –¥–æ–∑–æ—Ä—ñ–≤
  const patrolPeriodValue = patrolPeriod.trim();
  let isDayList = false;
  let patrolDays = [];
  let patrolInterval = 0;
  
  console.log('–ü–∞—Ä—Å–∏–Ω–≥ –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ—Å—Ç—ñ:', patrolPeriodValue); // –î–ª—è –¥–µ–±–∞–≥—É
  
  if (patrolPeriodValue.includes('/')) {
    // –§–æ—Ä–º–∞—Ç "1/4" - –∫–æ–∂–Ω—ñ 4 –¥–Ω—ñ
    const parts = patrolPeriodValue.split('/');
    if (parts.length !== 2) {
      return showError('‚ùó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ—Å—Ç—ñ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ "1/4" –∞–±–æ "3,6,11"');
    }
    const num = parseInt(parts[0]);
    const denom = parseInt(parts[1]);
    if (isNaN(num) || isNaN(denom) || denom <= 0) {
      return showError('‚ùó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ—Å—Ç—ñ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ "1/4" –∞–±–æ "3,6,11"');
    }
    // –Ü–Ω—Ç–µ—Ä–≤–∞–ª –≤ –≥–æ–¥–∏–Ω–∞—Ö: –∫–æ–∂–Ω—ñ denom –¥–Ω—ñ–≤
    patrolInterval = denom * 24;
    console.log('–Ü–Ω—Ç–µ—Ä–≤–∞–ª –¥–æ–∑–æ—Ä—ñ–≤ (–≥–æ–¥–∏–Ω):', patrolInterval); // –î–ª—è –¥–µ–±–∞–≥—É
  } else if (patrolPeriodValue.includes(',') || !isNaN(parseInt(patrolPeriodValue))) {
    // –§–æ—Ä–º–∞—Ç "3,6,11" –∞–±–æ –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ
    isDayList = true;
    const days = patrolPeriodValue.split(',').map(d => parseInt(d.trim())).filter(d => !isNaN(d) && d >= 1 && d <= 31);
    if (days.length === 0) {
      return showError('‚ùó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–Ω—ñ–≤. –í–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–∞ –≤—ñ–¥ 1 –¥–æ 31 —á–µ—Ä–µ–∑ –∫–æ–º—É');
    }
    patrolDays = days;
    console.log('–î–Ω—ñ –¥–æ–∑–æ—Ä—ñ–≤:', patrolDays); // –î–ª—è –¥–µ–±–∞–≥—É
  } else {
    return showError('‚ùó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ—Å—Ç—ñ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ "1/4" –∞–±–æ "3,6,11"');
  }

  let html='<table><tr><th>–ü–µ—Ä—ñ–æ–¥ (12 –≥–æ–¥)</th>';
  crew.forEach(c=>html+=`<th>${c.n}</th>`);
  html+='</tr>';

  // –î–Ω—ñ –¥–æ–∑–æ—Ä—ñ–≤ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É –¥–Ω—ñ–≤ –º—ñ—Å—è—Ü—è
  const patrolDates = [];
  if (isDayList) {
    // –°—Ç–≤–æ—Ä—é—î–º–æ –¥–∞—Ç–∏ –¥–æ–∑–æ—Ä—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–Ω—è –≤ –æ–±—Ä–∞–Ω–æ–º—É –º—ñ—Å—è—Ü—ñ
    const lastDayOfMonth = new Date(year, month + 1, 0).getDate();
    patrolDays.forEach(day => {
      if (day <= lastDayOfMonth) {
        const patrolStart = new Date(year, month, day, pStart.getHours(), 0, 0);
        patrolDates.push(patrolStart);
      }
    });
    console.log('–î–∞—Ç–∞ –¥–æ–∑–æ—Ä—ñ–≤ –¥–ª—è –º—ñ—Å—è—Ü—è:', patrolDates); // –î–ª—è –¥–µ–±–∞–≥—É
  }

  // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≥—Ä–∞—Ñ—ñ–∫—É
  for(let t=new Date(mStart);t<mEnd;t.setHours(t.getHours()+STEP)){
    let to=new Date(t.getTime() + STEP * 3600000);
    html+=`<tr><td>${t.toLocaleString('uk-UA')}<br>‚Äî<br>${to.toLocaleString('uk-UA')}</td>`;

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ —î –ø–∞—Ç—Ä—É–ª—å –≤ —Ü–µ–π –ø–µ—Ä—ñ–æ–¥
    let isPatrol = false;
    
    if (isDayList) {
      // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞ –¥–Ω—è–º–∏ –º—ñ—Å—è—Ü—è
      for (const patrolStart of patrolDates) {
        const patrolEnd = new Date(patrolStart.getTime() + 24 * 3600000);
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –ø–µ—Ä–µ—Ç–∏–Ω –ø–µ—Ä—ñ–æ–¥—É (t, to) –∑ –¥–æ–∑–æ—Ä–æ–º (patrolStart, patrolEnd)
        if (t < patrolEnd && to > patrolStart) {
          isPatrol = true;
          break;
        }
      }
    } else {
      // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (—Ñ–æ—Ä–º–∞—Ç "1/4")
      // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ —Å–∫—ñ–ª—å–∫–∏ –≥–æ–¥–∏–Ω –ø—Ä–æ–π—à–ª–æ –≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É –ø–µ—Ä—à–æ–≥–æ –¥–æ–∑–æ—Ä—É
      const hoursFromPatrolStart = (t - pStart) / 3600000;
      
      // –Ø–∫—â–æ —Ü–µ –º–∞–π–±—É—Ç–Ω—ñ–π –¥–æ–∑–æ—Ä –∞–±–æ –ø–æ—Ç–æ—á–Ω–∏–π
      if (hoursFromPatrolStart >= 0) {
        // –í–∏–∑–Ω–∞—á–∞—î–º–æ –Ω–æ–º–µ—Ä —Ü–∏–∫–ª—É
        const cycleNumber = Math.floor(hoursFromPatrolStart / patrolInterval);
        const startOfCurrentCycle = new Date(pStart.getTime() + cycleNumber * patrolInterval * 3600000);
        const endOfCurrentCycle = new Date(startOfCurrentCycle.getTime() + 24 * 3600000); // –î–æ–∑–æ—Ä —Ç—Ä–∏–≤–∞—î 24 –≥–æ–¥–∏–Ω–∏
        
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –ø–æ—Ç–æ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥ –ø–µ—Ä–µ—Ç–∏–Ω–∞—î—Ç—å—Å—è –∑ –¥–æ–∑–æ—Ä–æ–º
        if (t < endOfCurrentCycle && to > startOfCurrentCycle) {
          isPatrol = true;
        }
      }
      // –Ø–∫—â–æ hoursFromPatrolStart < 0, —Ü–µ –æ–∑–Ω–∞—á–∞—î —â–æ t —Ä–∞–Ω—ñ—à–µ –ø–µ—Ä—à–æ–≥–æ –¥–æ–∑–æ—Ä—É, —Ç–æ–º—É isPatrol –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è false
    }

    crew.forEach(c=>{
      // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–∑–∏—Ü—ñ—ó –≤ —Ü–∏–∫–ª—ñ —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è
      const hoursFromStart = (t - c.d) / 3600000;
      const cyclePosition = ((hoursFromStart % CYCLE_LENGTH + CYCLE_LENGTH) % CYCLE_LENGTH);
      
      if(cyclePosition < SHIFT_ON){
        c.h += STEP;
        html+=isPatrol?'<td class="patrol">–î–û–ó–û–†</td>':'<td class="on">–ß–µ—Ä–≥—É–≤–∞–Ω–Ω—è</td>';
      } else {
        html+='<td class="off">–í—ñ–¥–ø–æ—á–∏–Ω–æ–∫</td>';
      }
    });
    html+='</tr>';
  }

  html+='<tr><th>–†–∞–∑–æ–º –≥–æ–¥–∏–Ω</th>';
  crew.forEach(c=>html+=`<th>${c.h}</th>`);
  html+='</tr></table>';

  console.log('–¢–∞–±–ª–∏—Ü—è –ø–æ–±—É–¥–æ–≤–∞–Ω–∞, –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—è–¥–∫—ñ–≤:', (mEnd - mStart) / (STEP * 3600000)); // –î–ª—è –¥–µ–±–∞–≥—É
  document.getElementById('tableContainer').innerHTML=html;
}

async function shareTable(){
  if(!document.getElementById('tableContainer').innerHTML) return showError('‚ùó –°–ø–æ—á–∞—Ç–∫—É –ø–æ–±—É–¥—É–π—Ç–µ –≥—Ä–∞—Ñ—ñ–∫');
  const file=new File(
    [`<!DOCTYPE html><html><head>${document.head.innerHTML}</head>
      <body class="${document.body.className}">${document.getElementById('tableContainer').innerHTML}</body></html>`],
    'grafik.html',
    {type:'text/html'}
  );
  if(navigator.canShare&&navigator.canShare({files:[file]}))
    navigator.share({files:[file]});
  else alert('–ü–µ—Ä–µ–¥–∞—á–∞ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è');
}

function goMenu(){
  window.location.href='./index.html';
}
</script>

</body>
</html>
